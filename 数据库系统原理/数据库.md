# 数据库原理

## 第一章 数据库概念

### 第一节 数据库基本概念

> 1. 数据是描述事物的符号记录，指**物理符号记录下来的,可鉴别的信息**
> 2. 数据库是长期存储在计算机内，有组织,可共享的大量数据集合，数据库数据具有**永久存储,、有组织和可共享的特点**
> 3. **数据库管理(简称DBMS)**位于用户与操作系统之间的数据管理工具
>    1. 数据定义功能，提供数据定义语言(DDL)
>    2. 数据操作功能，提供数据操作语言(DML)
>    3. 数据库的运行管理，通过数据的安全性，完整性，多用户对数据并发操作及故障的系统恢复
>    4. 数据库建立和维护
>    5. 数据组织，存储和管理功能
> 4. 数据库系统是数据库技术后的系统，包括**数据库，数据库管理系统及相关实用工具，应用程序，数据库管理员和用户**。**数据库管理员(DBA)**负责数据库维护

### 第二节 数据库管理技术的发展

> 1. 人工管理
>    1. 数据**不保存**
>    2. 应用程序**管理**数据
>    3. 数据**面向**应用
>    4. **记录内无结构，整体五结构**
> 2. 文件系统阶段
>    1. 数据的管理者 数据**长期保存**
>    2. 数据面向的对象 某一应用程序
>    3. 数据的共享程度 **共享性差，数据冗余度大**
>    4. 数据的结构性 **独立性差**，数据的逻辑结构改变必须修改应用程序
>    5. 数据控制能力 应用程序自己控制
> 3. 数据库系统阶段
>    1. **数据集成**
>    2. **数据共享性高**
>    3. **数据冗余小**
>    4. **数据一致性**
>    5. **数据独立性高**
>    6. **实施统一管理和控制**
>    7. 减少应用程序开发与维护

### 第三节 数据库结构

> 1. 模式称之为**概念模式或逻辑模式**，是全体数据的**逻辑结构和特征描述**，是所有用户的**公共数据视图**
> 2. 外模式称之为**子模式(Subschema)或用户模式**，是数据库用户可以**看到和使用的局部数据的逻辑结构和特征描述**，**DBMS**提供了子模式的描述语言(Subschema DDL)
> 3. 内模式称之为**存储模式(Storage Schema)**，是数据库中**数据物理结构和存储方式的描述**，是数据在**数据库内部的表示形式**
> 4. **三级模式结构**的**两层映像**与**数据独立性**
>    1. **外模式/模式映像(逻辑独立性)**
>    2. **模式/内模式映像(物理独立性)**
> 5. **客户/服务器(Client/Server,C/S)模式**
> 6. **浏览器/服务器(Browser/Server,B/S)模式**

### 第四节 数据模型

> 1. 数据结构描述的是**系统的静态特性**，及数据对象的数据类型，内容，属性及数据对对象之间 的联系
> 2. 数据操作描述的是**系统的动态特性**，是对各种对象的实例允许执行的**操作集合**，包括**操作及有关操作规则**
> 3. 数据约束条件描述的是**数据结构中数据间的语法和语义关联**，包括**相互制约与依存关系以及数据动态变化规则**，以保证数据的**正确性，有效性与相容性**
> 4. 数据模型分类
>    - 概念层数数据模型
>      1. **实体(Entity)** 指的是**客观存在并可相互区别的事物**称之为实体，可以是具体的人，事，物或抽象的概念。
>      2. **属性(Attribute)**指的是**实体所具有的某一特性称为属性**，一个实体是由若干属性刻画
>      3. **码(key)**指的是**唯一标识实体的属性集**称之为码
>      4. **域(Domain)**指的是**属性的取值范围**称之为属性的域
>      5. **实体型(Entity Type)**指的是**实体名及其属性名集合去抽象和刻画**，同类实体称为实体型
>      6. **实体集(Entity Set)**指的是**同型的实体集合称之为实体集**
>      7. **联系(Relationship)**指的是**实体内部的联系和实体之间的联系**
>         - 实体类型联系
>           - **一对多** 1:N
>           - **一对一** 1:1
>           - **多对多** N:M
>    - 概念模型的表示方法
>      1. 概率模型用于描述现实世界的事物,与具体的设计系统无关，最典型的概念模型是**实体联系(E-R)**
>         - ![image-20210303152439443](数据库.assets/image-20210303152439443.png)
> 5. 逻辑层数据模型
>    1. 层次模型
>    2. 网状模型
>    3. **关系模型**
>    4. 面向对象模型
> 6. 物理层数据模型，称之为**数据的物理模型(Physical Model)**,其描述的是数据在**存储介质上的组织结构**，是逻辑层的**物理实现**，即每一种**逻辑模型在实现时都有与其对应的物理模型**
> 7. **概念-》逻辑-》物理 == 外模式-》模式-》内模式**

### 本章小节

![image-20210303153549135](数据库.assets/image-20210303153549135.png)

## 第二章 关系数据库

### 第一节 关系型数据库概述



> 1. ![image-20210304085034005](数据库.assets/image-20210304085034005.png)
> 2. 关系数据库应用**数学方法**来处理数据库数据
> 3. 常见的实验系统和商用系统
>    - 实验系统：System R，Universal INGRES
>    - 商用系统：ORACLE，IBM DB2，INFORMIX，SYBASE

### 第二节 关系数据模型

> 1. 关系模型的数据结构只包含**单一的数据结构,即关系**
>
> 2. 基本术语
>
>    1. **表(Table)**称之为**关系**,是一个二维的数据结构,是由**表名(关系)**构成的表的各个**列(属性)**及若干行数据组成，每张表都**有且只有一个唯一表名**，表中每一行数据描述一条具体的记录。
>    2. **关系(Relation)**，一个**关系逻辑对应一张二维表**,可为**每个关系取一个名称进行标识**
>    3. **列(Column)**称之为**字段(Field)**或**属性(Attribute)**，每列都有一个名称，称之为**列名，字段名，属性**，每列表示**实体的一个属性且具有相同的数据类型**
>    4. **属性(Attribute)**即一列为一个属性，给每个属性起名称即为属性名,**与之同义的术语是“列”**，**属性的个数称之为关系的元或度**，列的值为属性值；**属性值的取值范围称之为值域**
>    5. **行(Row)**称之为**元组(Tuple)**或**记录(Record)**
>    6. **元组(Tuple)**即为表中的一行
>    7. **分量(Component)**,元组中的一个属性值称之为分量
>    8. **码或键(Key)**,如果在一个关系中存在使得**该关系的任何一个关系状态中的两个元组,在该属性(或属性组)上值的组合不同**，即这些**属性(或属性组)的值都能用来标识该关系的元组**，则此属性(或属性组)称之为**该关系的码和键**
>    9. **超码或超键(Super Key)**，在**关系的一个码或键中移除某个属性，仍然是这个关系的码**，则这种码或键称之为超码或超键
>    10. **候选码或候选键(Candidate Key)**，在**关系的一个码或键中不能移除某个属性，否则他不再是这个关系的码或键**，则这种码称之为候选码或候选键
>    11. **主键或主码(Primary Key)**,在**一个关系的若干候选码或候选键中指定一个作为关系的唯一标识的元组**(在设计表时尽量保证一表一主键)
>    12. **全码或全键(All-Key)指的是关系模式中所有属性集合是该关系的主键或主码**
>    13. **主属性(Prime Attribute)和非主属性(Nonprime Attribute)**,关系中**包含在任意一个候选码中的属性**称之为主属性或码属性,**不包含在任何一个候选码中的属性**称之为非主属性或非码属性
>    14. **外码或外键**，当关系中某一属性(或属性组)**不是该关系的主码或候选码,而是另一关系的主码。**
>    15. **参照关系(Referencing Relation)和被参照关系(Referenced Relation)**,参照关系称之为从关系，被参照关系称之为主关系，指的是以外码相关联的两个关系。**以外码作为在主码的关系称之为被参照关系；外码所在的关系称之为参照关系。通过外码相联系，一般为一对多的联系；**
>    16. **域(Domain)**,属性的取值范围
>    17. **数据类型(Data Type)**,表中每列都有其相应的数据类型,它用于限制或容许该列的存储数据。每个字段表示同一类信息，具有相同的数据类型
>    18. **关系模型(Relation Schema)**,数据库有**型(type)和值(value)**之分，在关系型数据库中，**关系模式是型，关系是值**，即**关系模式对关系的描述**。关系模式是**静态的，稳定的**，而关系是**动态的，随时间不断变化的**
>    19. **关系数据库(Relation Database)**是以**关系模型作为数据的逻辑模型,**并**采用关系作为数据的组织方式**，其**操作是建立在关系代数的基础上**的
>
> 3. 关系操作
>
>    - ![image-20210304111332593](数据库.assets/image-20210304111332593.png)
>
> 4. 关系数据语言的分类
>
>    - 关系操作能力分为**代数方式**和**逻辑方式**
>    - 代数方式主要有**关系代数** ，通过对关系的操作来表达查询要求
>    - 逻辑方式主要有**关系演算** ，通过使用谓词来表达查询要求的方式
>    - 具有**关系代数和关系演算**的双重特点的语言 
>    - 典型代表SQL
>
> 5. 关系代数
>
>    
>
>    - ![image-20210304112108110](数据库.assets/image-20210304112108110.png)
>
>    - ![image-20210304112357826](数据库.assets/image-20210304112357826.png)
>
>      
>
> 6. 专门关系运算
>
>    1. ![image-20210304112645888](数据库.assets/image-20210304112645888.png)
>    2. ![image-20210304125457209](数据库.assets/image-20210304125457209.png)
>    3. ![image-20210304125646637](数据库.assets/image-20210304125646637.png)
>    4. ![image-20210304130030403](数据库.assets/image-20210304130030403.png)
>    5. ![image-20210304130159998](数据库.assets/image-20210304130159998.png)
>    6. ![image-20210304130356758](数据库.assets/image-20210304130356758.png)
>    7. 关系模型完整性约束检验
>       1. 执行插入
>       2. 执行删除
>       3. 执行更新

### 第三节 关系型数据库规范化理论

> 1. 关系型数据库存在冗余和异常的问题
>    - 数据冗余
>    - 更新异常
>    - 插入异常
>    - 删除异常
> 2. ![image-20210304133430237](数据库.assets/image-20210304133430237.png)![image-20210304134256197](数据库.assets/image-20210304134256197.png)![image-20210304134358717](数据库.assets/image-20210304134358717.png)![image-20210304135148812](数据库.assets/image-20210304135148812.png)
> 3. 关键字 
>    - 设R为任一给定关系,U为其所含的全部属性集合，X为U的子集，若有完全函数依赖X->U,则X为R的一个候选关键字
> 4. 范式
>    - ![image-20210304140241699](数据库.assets/image-20210304140241699.png)![image-20210304140937531](数据库.assets/image-20210304140937531.png)
> 5. ![image-20210304141444242](数据库.assets/image-20210304141444242.png)

###  本章小节

![image-20210304141553249](数据库.assets/image-20210304141553249.png)

## 第三章 数据库设计

### 第一节 数据库设计概述

> 1. 数据库生命周期分为**数据库分析与设计阶段,数据库实现与操作阶段**
> 2. 数据库分析与设计阶段包括**需求分析,概念设计，逻辑设计和物理设计**，数据库实现与操作阶段包括**数据库实现，操作与监督，修改与调整**
> 3. 数据库设计的两个目标，即**满足应用功能需求和良好的数据库性能**
> 4. 数据库设计从用户对数据需求出发，主要包含**数据库结构设计和数据库行为设计**
> 5. 数据库设计方法
>    1. 直观设计法
>    2. 规范设计法
>       - 新奥尔良(New Orleans)设计方法
>       - 基于E-R模型的数据库设计方法
>       - 基于第三范式的设计方法
>    3. 计算机辅助设计法
> 6. 数据库设计过程
>    - ![image-20210305093159846](数据库.assets/image-20210305093159846.png)

### 第二节 数据库设计基本步骤

> 1. 需求分析
>    1. **确定数据库范围**，即确定数据库**支持哪些应用功能**(费时费钱)；
>    2. **应用过程分析**，指**分析数据与数据处理间的关系**，数据库范围确立后，应**逐次了解和分析每个部门或功能需要的数据，数据使用的顺序，对数据作何处理和处理策略及处理结果**
>    3. 收集和分析数据 
>       1. **静态结构**指**不施加应用操作于数据的原始状态**，通过**数据分类表和数据元素**进行说明
>       2. **动态结构**指将**应用操作施加于数据上后的数据状态**，可通过**任务分类表和数据操作特征表**进行说明
>       3. **数据约束**指使用数据时的特殊要求

